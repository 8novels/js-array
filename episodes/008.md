# 魔法JS☆あれい 第8話「filterって、ほんとfindとfindIndex」

登場人物

丹生（にゅう）あれい
魔法少女「魔法（マジカル）JS（女子小学生）☆あれい」として活動中。

イテレー太
正体不明の魔法生物。

第1部「ミューテーター・メソッド編」
* [第1話「popでpushした、ような……」](https://qiita.com/8amjp/items/e44e707ccc8c95b4a40d)
* [第2話「shiftはとってもunshiftって」](https://qiita.com/8amjp/items/3fc1b2defd28ba1c2df3)
* [第3話「もうsortもreverseも怖くない」](https://qiita.com/8amjp/items/86f5294981fbebd3fe2d)
* [第4話「fillも、spliceも、copyWithinもあるんだよ」](https://qiita.com/8amjp/items/0741e35b70ea32711265)

第2部「アクセサ・メソッド編」
* [第5話「joinなんて、concatなわけない」](https://qiita.com/8amjp/items/229c41ad2146728abd89)
* [第6話「indexOfなの絶対lastIndexOf」](https://qiita.com/8amjp/items/f7e421722e419c1c0a7d)
* [第7話「includesのsliceと向き合えますか？」](https://qiita.com/8amjp/items/007ac192399225db3843)

## filter()

イテレー太「この話から読んだ人のために改めて説明するけど、あれいは魔法少女で、僕はイテレータ型魔法生物で、僕が魔法世界からデータを召喚して、あれいが配列魔法を使ってそのデータを敵の弱点に合わせた値に変換して`return`する事でダメージを与えることができて、そして今戦闘の真っ最中だよ！」
あれい「おつかれさん」
イ「そして、今回から『イテレーション・メソッド編』突入ということで、僕が召喚するデータも[Qiita API](https://qiita.com/api/v2/docs)から取得できるデータとし、さらに今まで登場したメソッドも組み合わせて、より実践的な配列魔法を使ってもらうよ！」
あ「真面目なセリフも言えるんだな駄犬のくせに
イ「さて、今回僕が魔法世界から召喚したデータは……これだ！」




```js
[
{

"rendered_body": "<p>登場人物</p>\n\n<p>丹生（にゅう）あれい<br>\n魔法少女「魔法（マジカル）JS（女子小学生）☆あれい」として活動中。</p>\n\n<p>イテレー太<br>\n正体不明の魔法生物。</p>\n\n<h2>\n<span id=\"pop\" class=\"fragment\"></span><a href=\"#pop\"><i class=\"fa fa-link\"></i></a>pop()</h2>\n\n<p>イテレー太「あれい、すべての前置きを端折るけど、今戦闘の真っ最中だよ！」<br>\nあれい「楽してんじゃねえよこの駄犬が」<br>\nイ「犬じゃなくてイテレータ型魔法生物だよ！　そして敵を倒すにはあれいの配列魔法が必要なんだ！」<br>\nあ「人の話を聞けこの雑種」<br>\nイ「僕が魔法世界から召喚したデータを、あれいの配列魔法を使って、敵の弱点に合わせた値に変換して<code>return</code>する事で、ダメージを与えることができるんだ！」<br>\nあ「なら最初からまともなデータを用意しろよポンコツ」<br>\nイ「さて、今回僕が召喚したデータは……これだよ！」</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><span class=\"nx\">items</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"dl\">'</span><span class=\"s1\">羽二重餅</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">水ようかん</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">梅月せんべい</span><span class=\"dl\">'</span><span class=\"p\">];</span>\n</pre></div></div>\n\n<p>あ「……それ、全部福井の銘菓じゃねえか。相変わらず福井県民丸出しだな」<br>\nイ「そして、今回の敵の弱点は、『配列の最後の要素』だよ！　さあ、配列の最後の要素を<code>return</code>してぶつけるんだ！」<br>\nあ「だから最後の要素だけ召喚しろっつってんだろこのボロ雑巾」<br>\nイ「頼んだよ！　あれい！」<br>\nあ「面倒くせえなあ……」</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><span class=\"k\">return</span> <span class=\"nx\">items</span><span class=\"p\">.</span><span class=\"nx\">pop</span><span class=\"p\">();</span>\n</pre></div></div>\n\n<p>イ「おおっ！　やったよ、あれい！　梅月せんべいが炸裂したよ！　梅月せんべいで敵をやっつけたよ！」<br>\nあ「お前ちょっと黙ってろ」</p>\n\n<h3>\n<span id=\"解説\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E8%AA%AC\"><i class=\"fa fa-link\"></i></a>解説</h3>\n\n<p><code>pop()</code> メソッドは、配列を操作するメソッドの中でも最も基本的なものです。<br>\n<a href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/pop\" rel=\"nofollow noopener\" target=\"_blank\">MDN</a>によると……</p>\n\n<blockquote>\n<p><code>pop()</code> メソッドは、配列から最後の要素を取り除き、その要素を返します。このメソッドは配列の長さを変化させます。</p>\n</blockquote>\n\n<p>つまり、積み重ねられたカードから、一番上に乗っているカードを1枚取って、そのカードを相手に返すようなイメージです。配列というスタック構造のデータの操作としては、最も直感的にわかりやすい動きですね。</p>\n\n<h2>\n<span id=\"push\" class=\"fragment\"></span><a href=\"#push\"><i class=\"fa fa-link\"></i></a>push()</h2>\n\n<p>イ「おっと、次の敵が出てきたよ！」<br>\nあ「どうなってるんだこの街は」<br>\nイ「さて、僕が魔法世界から召喚したデータは、今こんな状態になっているよ！」</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><span class=\"nx\">items</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"dl\">'</span><span class=\"s1\">羽二重餅</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"dl\">'</span><span class=\"s1\">水ようかん</span><span class=\"dl\">'</span><span class=\"p\">];</span>\n</pre></div></div>\n\n<p>あ「そうだな」<br>\nイ「そして、新たに魔法世界から召喚したデータは、これだ！」</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><span class=\"nx\">newItem</span> <span class=\"o\">=</span> <span class=\"dl\">'</span><span class=\"s1\">五月ヶ瀬</span><span class=\"dl\">'</span><span class=\"p\">;</span>\n</pre></div></div>\n\n<p>イ「このデータを、元の配列の最後に追加した上で、その最後の要素を敵にぶつけるんだ！」<br>\nあ「……それこそ直接ぶつけりゃいいじゃねえか。バカなのかお前は」<br>\nイ「いいから！　急いで、あれい！」<br>\nあ「面倒くせえなあ……」</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><span class=\"k\">return</span> <span class=\"nx\">items</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"nx\">newItem</span><span class=\"p\">);</span>\n</pre></div></div>\n\n<p>あ「……おい、効いてないぞ」<br>\nイ「わははは、引っかかったね！　<code>push()</code>メソッドの戻り値は、配列の要素の数なんだよ！」<br>\nあ「お前どっちの味方なんだよ」</p>\n\n<h3>\n<span id=\"解説-1\" class=\"fragment\"></span><a href=\"#%E8%A7%A3%E8%AA%AC-1\"><i class=\"fa fa-link\"></i></a>解説</h3>\n\n<p><code>push()</code> メソッドも、最も基本的な操作の一つですね。<br>\nまたまた<a href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/push\" rel=\"nofollow noopener\" target=\"_blank\">MDN</a>によると……</p>\n\n<blockquote>\n<p><code>push()</code> メソッドは、配列の末尾に 1 つ以上の要素を追加することができます。また戻り値として新しい配列の要素数を返します。</p>\n</blockquote>\n\n<p>つまり、積み重ねられたカードの上に、さらにカードを乗せるようなイメージです。これも直感的にわかりやすい動きですね。<br>\nまた、このメソッドの戻り値は、配列の要素の数です。例えば、空の配列に1つの要素を<code>push()</code>した場合、戻り値は1になります。</p>\n\n<hr>\n\n<p>イ「さて、ピンチだよ！　どうする、あれい！」</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><span class=\"k\">return</span> <span class=\"nx\">items</span><span class=\"p\">[</span><span class=\"nx\">items</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"nx\">newItem</span><span class=\"p\">)</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">];</span>\n</pre></div></div>\n\n<p>あ「これでいいのか」<br>\nイ「あ、うん……攻撃できたね」<br>\nあ「だからどっちの味方なんだよ」</p>\n\n<div class=\"code-frame\" data-lang=\"js\"><div class=\"highlight\"><pre><span class=\"k\">return</span> <span class=\"nx\">items</span><span class=\"p\">.</span><span class=\"nx\">slice</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nx\">items</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">(</span><span class=\"nx\">newItem</span><span class=\"p\">)).</span><span class=\"nx\">pop</span><span class=\"p\">();</span>\n</pre></div></div>\n\n<p>あ「これでもいいのか」<br>\nイ「あ、<code>slice()</code>とかはもっと後の話で出てくるからまだやめて……」</p>\n\n<hr>\n\n<p>さて、魔法JS☆あれいは、魔法（JavaScript）の力でこの世界を守ることが出来るのか！？　次回に続く！</p>\n",

"body": "登場人物\n\n丹生（にゅう）あれい\n魔法少女「魔法（マジカル）JS（女子小学生）☆あれい」として活動中。\n\nイテレー太\n正体不明の魔法生物。\n\n## pop()\n\nイテレー太「あれい、すべての前置きを端折るけど、今戦闘の真っ最中だよ！」\nあれい「楽してんじゃねえよこの駄犬が」\nイ「犬じゃなくてイテレータ型魔法生物だよ！　そして敵を倒すにはあれいの配列魔法が必要なんだ！」\nあ「人の話を聞けこの雑種」\nイ「僕が魔法世界から召喚したデータを、あれいの配列魔法を使って、敵の弱点に合わせた値に変換して`return`する事で、ダメージを与えることができるんだ！」\nあ「なら最初からまともなデータを用意しろよポンコツ」\nイ「さて、今回僕が召喚したデータは……これだよ！」\n\n```js\nitems = ['羽二重餅', '水ようかん', '梅月せんべい'];\n```\n\nあ「……それ、全部福井の銘菓じゃねえか。相変わらず福井県民丸出しだな」\nイ「そして、今回の敵の弱点は、『配列の最後の要素』だよ！　さあ、配列の最後の要素を`return`してぶつけるんだ！」\nあ「だから最後の要素だけ召喚しろっつってんだろこのボロ雑巾」\nイ「頼んだよ！　あれい！」\nあ「面倒くせえなあ……」\n\n```js\nreturn items.pop();\n```\n\nイ「おおっ！　やったよ、あれい！　梅月せんべいが炸裂したよ！　梅月せんべいで敵をやっつけたよ！」\nあ「お前ちょっと黙ってろ」\n\n### 解説\n\n`pop()` メソッドは、配列を操作するメソッドの中でも最も基本的なものです。\n[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/pop)によると……\n\n> `pop()` メソッドは、配列から最後の要素を取り除き、その要素を返します。このメソッドは配列の長さを変化させます。\n\nつまり、積み重ねられたカードから、一番上に乗っているカードを1枚取って、そのカードを相手に返すようなイメージです。配列というスタック構造のデータの操作としては、最も直感的にわかりやすい動きですね。\n\n## push()\n\nイ「おっと、次の敵が出てきたよ！」\nあ「どうなってるんだこの街は」\nイ「さて、僕が魔法世界から召喚したデータは、今こんな状態になっているよ！」\n\n```js\nitems = ['羽二重餅', '水ようかん'];\n```\n\nあ「そうだな」\nイ「そして、新たに魔法世界から召喚したデータは、これだ！」\n\n```js\nnewItem = '五月ヶ瀬';\n```\n\nイ「このデータを、元の配列の最後に追加した上で、その最後の要素を敵にぶつけるんだ！」\nあ「……それこそ直接ぶつけりゃいいじゃねえか。バカなのかお前は」\nイ「いいから！　急いで、あれい！」\nあ「面倒くせえなあ……」\n\n```js\nreturn items.push(newItem);\n```\n\nあ「……おい、効いてないぞ」\nイ「わははは、引っかかったね！　`push()`メソッドの戻り値は、配列の要素の数なんだよ！」\nあ「お前どっちの味方なんだよ」\n\n### 解説\n\n`push()` メソッドも、最も基本的な操作の一つですね。\nまたまた[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/push)によると……\n\n> `push()` メソッドは、配列の末尾に 1 つ以上の要素を追加することができます。また戻り値として新しい配列の要素数を返します。\n\nつまり、積み重ねられたカードの上に、さらにカードを乗せるようなイメージです。これも直感的にわかりやすい動きですね。\nまた、このメソッドの戻り値は、配列の要素の数です。例えば、空の配列に1つの要素を`push()`した場合、戻り値は1になります。\n\n----\nイ「さて、ピンチだよ！　どうする、あれい！」\n\n```js\nreturn items[items.push(newItem)-1];\n```\n\nあ「これでいいのか」\nイ「あ、うん……攻撃できたね」\nあ「だからどっちの味方なんだよ」\n\n```js\nreturn items.slice(0, items.push(newItem)).pop();\n```\n\nあ「これでもいいのか」\nイ「あ、`slice()`とかはもっと後の話で出てくるからまだやめて……」\n\n----\nさて、魔法JS☆あれいは、魔法（JavaScript）の力でこの世界を守ることが出来るのか！？　次回に続く！\n",

"coediting": false,

"comments_count": 0,

"created_at": "2020-03-14T21:00:28+09:00",

"group": null,

"id": "e44e707ccc8c95b4a40d",

"likes_count": 1,

"private": false,

"reactions_count": 0,

"tags":[

{
"name": "JavaScript",
    "versions":[]
    },
  ],
 "title": "魔法JS☆あれい 第1話「popでpushした、ような……」",
 "updated_at": "2020-03-16T18:02:07+09:00",
 "url": "https://qiita.com/8amjp/items/e44e707ccc8c95b4a40d",
  "user":{"description": "福井市に住むSE・プログラマ。Kindleストアで足羽川永都（あすわがわえいと）名義で技術系異世界ファンタジー小説「Redmineで始める異世界人心掌握術」販売中。", "facebook_id": "", "followees_count": 75,…},
  "page_views_count": null
  },
]
```

あ「前回と一緒じゃねえか。どれだけ引っ張るんだこのネタ」
イ「……果たして、本当にそうかな？」
あ「何だと」
イ「じゃあ、この配列の中に、『ウォーリー』という文字列があるかどうかを判定して、`true`か`false`のいずれかの値を`return`して敵を倒してよ！」
あ「面倒くせえなあ……」

```js
return items.includes('ウォーリー');
// false
```

あ「ねえのかよ」
イ「伸ばし棒（ー）に見える文字は全部漢数字の一だよ！」
あ「どれだけ手の混んだ嫌がらせだよ」

### 解説

> `includes()` メソッドは、特定の要素が配列に含まれているかどうかを `true` または `false` で返します。与えられた要素が見つかるかどうかを計算するために、 SameValueZero (ゼロの同値) アルゴリズムを使用します。

（[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)より）

`includes()` メソッドは、[ECMAScript 2016](https://www.ecma-international.org/ecma-262/7.0/#sec-array.prototype.includes)から追加された新しいメソッドです。「検索する値、開始位置」という引数を指定でき、指定した値が配列に含まれていれば`true`、含まれていなければ`false`を返します。また、開始位置を指定した場合は、その位置以降の要素のみを検索対象にします。

## find()

イ「じゃあ、次に魔法世界から召喚したデータは……これだよ！」

```js
items = [
  'ウォーリー', 'ウォーリー', 'ウォーリー',
  'ウォーリー', 'ウォーリー', 'ウォーリー',
  'ウォーリー', 'ウォーリー', 'ウォーリー'
];
```

あ「もう全部ウォーリーじゃねえか」
イ「この中から、3番目、4番目、5番目のウォーリーだけを取り出して、それを`return`して敵を倒してよ！」
あ「他のウォーリーとそのウォーリーは何が違うんだよ」
イ「さあ、急いで！」
あ「面倒くせえなあ……」

```js
return items.slice(2, 5);
// ['ウォーリー', 'ウォーリー', 'ウォーリー']
```

イ「やったね、あれい！　効いてるよ！」
あ「敵もよく判別がつくな」

### 解説

> `slice()` メソッドは `begin` から `end` まで選択された配列の一部をシャローコピーして、新しい配列オブジェクトを返します (`end` は含まれません)。元の配列は変更されません。

（[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)より）

このメソッドは「開始位置、終了位置」という引数を指定できます。しかし、実際に返される値は「開始位置の要素」から「終了位置の直前の要素」であることに注意してください。また、終了位置を指定しない場合は配列の末尾までの要素が、開始位置も指定しない場合はすべての要素が返ります。
この特徴を利用して、引数を指定しないことで、配列をコピーして新しい配列を作成する、という用途にも使用できます。

----
これにて、第2部「アクセサ・メソッド編」完結です。次回からは、第3部「イテレーション・メソッド編」がスタートします。
さて、魔法JS☆あれいは、魔法（JavaScript）の力でこの世界を守ることが出来るのか！？　次回に続く！
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTM0ODIyMzg3NywtMTIwOTMxMjE4LDE3Nz
c4NjcxOTRdfQ==
-->