# 魔法JS☆あれい 第1話「popでpushした、ような……」


登場人物

丹生（にゅう）あれい
魔法少女「魔法（マジカル）JS（女子小学生）☆あれい」として活動中。

イテレー太
正体不明の魔法生物。

## pop()

イテレー太「あれい、すべての前置きを端折るけど、今戦闘の真っ最中だよ！」
あれい「楽してんじゃねえよこの駄犬が」
イ「犬じゃなくてイテレータ型魔法生物だよ！　そして敵を倒すにはあれいの配列魔法が必要なんだ！」
あ「人の話を聞けこの雑種」
イ「僕が魔法世界から召喚したデータを、あれいの配列魔法を使って、敵の弱点に合わせた値に変換して`return`する事で、ダメージを与えることができるんだ！」
あ「なら最初からまともなデータを用意しろよポンコツ」
イ「さて、今回僕が召喚したデータは……これだよ！」

```js
items = ['羽二重餅', '水ようかん', '梅月せんべい'];
```

あ「……それ、全部福井の銘菓じゃねえか。相変わらず福井県民丸出しだな」
イ「そして、今回の敵の弱点は、『配列の最後の要素』だよ！　さあ、配列の最後の要素を`return`してぶつけるんだ！」
あ「だから最後の要素だけ召喚しろっつってんだろこのボロ雑巾」
イ「頼んだよ！　あれい！」
あ「面倒くせえなあ……」

```js
return items.pop();
```

イ「おおっ！　やったよ、あれい！　梅月せんべいが炸裂したよ！　梅月せんべいで敵をやっつけたよ！」
あ「お前ちょっと黙ってろ」

### 解説

`pop()` メソッドは、配列を操作するメソッドの中でも最も基本的なものです。
[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/pop)によると……

> `pop()` メソッドは、配列から最後の要素を取り除き、その要素を返します。このメソッドは配列の長さを変化させます。

つまり、積み重ねられたカードから、一番上に乗っているカードを1枚取って、そのカードを相手に返すようなイメージです。配列というスタック構造のデータの操作としては、最も直感的にわかりやすい動きですね。

## push()

イ「おっと、次の敵が出てきたよ！」
あ「どうなってるんだこの街は」
イ「さて、僕が魔法世界から召喚したデータは、今こんな状態になっているよ！」

```js
items = ['羽二重餅', '水ようかん'];
```

あ「そうだな」
イ「そして、新たに魔法世界から召喚したデータは、これだ！」

```js
newItem = '五月ヶ瀬';
```

イ「このデータを、元の配列の最後に追加した上で、その最後の要素を敵にぶつけるんだ！」
あ「……それこそ直接ぶつけりゃいいじゃねえか。バカなのかお前は」
イ「いいから！　急いで、あれい！」
あ「面倒くせえなあ……」

```js
return items.push(newItem);
```

あ「……おい、効いてないぞ」
イ「わははは、引っかかったね！　`push()`メソッドの戻り値は、配列の要素の数なんだよ！」
あ「お前どっちの味方なんだよ」

### 解説

`push()` メソッドも、最も基本的な操作の一つですね。
またまた[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/push)によると……

> `push()` メソッドは、配列の末尾に 1 つ以上の要素を追加することができます。また戻り値として新しい配列の要素数を返します。

つまり、積み重ねられたカードの上に、さらにカードを乗せるようなイメージです。これも直感的にわかりやすい動きですね。
また、このメソッドの戻り値は、配列の要素の数です。例えば、空の配列に1つの要素を`push()`した場合、戻り値は1になります。

----
イ「さて、ピンチだよ！　どうする、あれい！」

```js
return items[items.push(newItem)-1];
```

あ「これでいいのか」
イ「あ、うん……攻撃できたね」
あ「だからどっちの味方なんだよ」

```js
return items.slice(0, items.push(newItem)).pop();
```

あ「これでもいいのか」
イ「あ、`slice()`とかはもっと後の話で出てくるからまだやめて……」

## 次回予告

魔法JS☆あれいは、魔法（JavaScript）の力でこの世界を守ることが出来るのか。
[第2話 shiftはとってもunshiftって](https://qiita.com/8amjp/items/3fc1b2defd28ba1c2df3)
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIxMDA5NTk4NjAsLTI2NDg5NTg3MiwzMz
Q0NDEzMjgsMzgzMTIzODE4LDMwMjkwNTA2MCw0ODI4NjM3MTcs
MTIzNzc2OTUwNCwtMTQwNjcxMTYwLC01NTA2NzY3MTksMjEzNT
M0NDI5MiwtMTc1OTgxNjYwMywxOTc1ODg5MDI4LC0xNjA1OTU3
NjU2LC01MTI2MDIyODMsLTExMTUzNDUyMjcsLTMxMjY1NDE3Mi
wtMjA0ODkwNTU2LC0xOTcyODg4NTUxLDI4NTIwMDM1OSwtNDk0
NDk3OTc2XX0=
-->