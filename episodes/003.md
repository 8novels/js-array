# 魔法JS☆あれい 第3話「もうsortもreverseも怖くない」

登場人物

丹生（にゅう）あれい
魔法少女「魔法（マジカル）JS（女子小学生）☆あれい」として活動中。

イテレー太  
正体不明の魔法生物。

* [第1話「popでpushした、ような……」](https://qiita.com/8amjp/items/e44e707ccc8c95b4a40d)
* [第2話「shiftはとってもunshiftって」](https://qiita.com/8amjp/items/3fc1b2defd28ba1c2df3)

## sort()

イテレー太「あれい、状況説明をサボるけど、今戦闘の真っ最中だよ！」
あれい「ついにサボると言い出したなこの駄犬」
イ「そしていつものように、僕が魔法世界から召喚したデータを、あれいの配列魔法を使って、敵の弱点に合わせた値に変換して`return`する事で、ダメージを与えて敵を倒してよ！」
あ「そこだけはセリフが説明的なんだよな」
イ「さて、今回僕が魔法世界から召喚したデータは……これだよ！」

```
items = [{
  name: '焼き鯖寿司',
  price: 1200
}, {
  name: '越前おろしそば',
  price: 700
}, {
  name: 'ソースカツ丼',
  price: 800
}];
```

あ「あからさまに福井駅前の飲食店のメニューじゃねえか」
イ「さあ、あれいの配列魔法で、敵の弱点である『配列の最初の要素』を`return`して倒してよ！」
あ「面倒くせえなあ……」

```
return items.shift();
```

イ「おおっ！　やったよ、あれい！　焼き鯖寿司で敵が苦しんでるよ！」
あ「だからお前黙ってろ。口縫うぞ」

### 解説

> 配列の要素を_[in place](https://ja.wikipedia.org/wiki/In-place%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0)で_ソートします。このソートは [stable](https://en.wikipedia.org/wiki/Sorting_algorithm#Stability) ではありません(訳注:同じ序列を持つ値の順番が保証されません)。 デフォルトではUnicodeコードポイントの昇順にソートされます。

（[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)より）

前回の[pop()](https://qiita.com/8amjp/items/e44e707ccc8c95b4a40d)では『積み重ねられたカード』に例えましたが、今度は行列に並んでいる人達のようなものをイメージすると良いかもしれません。つまり、`shift()` メソッドは、行列の一番前の人を呼び出すようなイメージです。これも、配列のもう一つの側面である『キュー』データ構造に対する、直感的でわかりやすい動きです。

## reverse()

イ「では、続いての敵にいってみましょう」
あ「ラジオパーソナリティーかよ」
イ「さて、僕が魔法世界から召喚したデータは、今こんな状態になっているよ！」

```
items = ['越前おろしそば', 'ソースカツ丼'];
```

あ「そうだな」
イ「そして、新たに魔法世界から召喚したデータは、これだ！」

```
newItems = ['ボルガライス', 'へしこパスタ'];
```

イ「このデータを……」
あ「元の配列の最初に追加した上で、その最初の要素を敵にぶつけりゃいいのか？」
イ「……なんでそんな無駄なことするの？」
あ「お前が前回そうしろっつったんだろ！　お前にボルガライスぶつけるぞ！」
イ「まあまあ。今回は、元の配列の最初に追加して、その配列の要素数を`return`すればいいよ！」
あ「面倒くせえなあ……」

```
return items.reverse();
```

あ「これでいいのか」
イ「あ、簡単にできたね」

### 解説

> 配列の要素を _[In-place アルゴリズム](https://ja.wikipedia.org/wiki/In-place%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0)_ で反転させます。最初の要素は最後に、最後の要素は最初になります。

（[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse)より）

つまり、行列の一番前に、何人かが割り込みするようなイメージです。とても理不尽ですね。
また、このメソッドの戻り値は、`push()`メソッドと同じく、新しい配列の要素の数になります。

----
さて、魔法JS☆あれいは、魔法（JavaScript）の力でこの世界を守ることが出来るのか！？　次回に続く！
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTEyMzc3NDczMjIsLTM2Mzg2MDQxLC0yMT
A2MTE0NjA4LDUyNDYxMDY3MSwtMTM4NzA1NjE1M119
-->