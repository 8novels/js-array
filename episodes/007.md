# 魔法JS☆あれい 第7話「includesのsliceと向き合えますか？」


登場人物

丹生（にゅう）あれい
魔法少女「魔法（マジカル）JS（女子小学生）☆あれい」として活動中。

イテレー太
正体不明の魔法生物。

第1部「ミューテーター・メソッド編」
* [第1話「popでpushした、ような……」](https://qiita.com/8amjp/items/e44e707ccc8c95b4a40d)
* [第2話「shiftはとってもunshiftって」](https://qiita.com/8amjp/items/3fc1b2defd28ba1c2df3)
* [第3話「もうsortもreverseも怖くない」](https://qiita.com/8amjp/items/86f5294981fbebd3fe2d)
* [第4話「fillも、spliceも、copyWithinもあるんだよ」](https://qiita.com/8amjp/items/0741e35b70ea32711265)

第2部「アクセサ・メソッド編」
* [第5話「joinなんて、concatなわけない」](https://qiita.com/8amjp/items/229c41ad2146728abd89)
* [第6話「indexOfなの絶対lastIndexOf」](https://qiita.com/8amjp/items/f7e421722e419c1c0a7d)

## includes()

イテレー太「この話、別に魔法少女ものっていう設定じゃなくてもいいよね」
あれい「第6話にして我に返ってんじゃねえよこの駄犬」
イ「さ、気を取り直して、今回僕が魔法世界から召喚したデータは……これだ！」

```js
items = [
  'ウォーター', 'ワォーリー', 'ウォ一リ一',
  'ウォーソー', 'ウォーリー', 'ウ才ーリー',
  'ウォーリー', 'チャーリー', 'チャーハン'
];
```

あ「前回と一緒じゃねえか。どれだけ引っ張るんだよ」
イ「果たして、本当にそうかな？」
あ「何だと」
イ「じゃあ、この配列の中に、『ウォーリー』という文字列があるかどうかを`true`か`false`前から何番目にあるのか？　を探し出して、`return`して敵を倒してよ！」
あ「そしてなんなんだその注文は」
イ「さあ、早く！」
あ「面倒くせえなあ……」

```js
return items.indexOf('ウォーリー');
// 4
```

イ「配列魔法を使うとウォーリーも簡単に見つかるね！」
あ「ところで、3番目のやつは違うのか？」
イ「あ、あれは伸ばし棒（ー）じゃなくて漢数字の一なんだよ」
あ「まぎらわしいな」
イ「ちなみに、漢字とカタカナが混じってる文字列は、ダブルクリックしても一部しか選択されないよ！　みんなもやってみてね！」
あ「何の豆知識だよ」

### 解説

> `includes()` メソッドは、特定の要素が配列に含まれているかどうかを `true` または `false` で返します。与えられた要素が見つかるかどうかを計算するために、 SameValueZero (ゼロの同値) アルゴリズムを使用します。

（[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)より）

String（文字列）オブジェクトに対する`indexOf()`メソッドは有名ですが、配列にもほぼ同じメソッドが用意されています。配列内を検索し、指定した値が最初に現れる場所（インデックス）を返します。

## slice()

イ「ところで、さっきの配列にはもう一つ『ウォーリー』が隠れているよ！」
あ「興味ねえよ」
イ「それじゃあ、今後はさっきの配列を後ろから検索して、『ウォーリー』という文字列が何番目にあるのか？　を探し出して、`return`して敵を倒してよ！」
あ「データの召喚をサボってんじゃねえよ」
イ「さあ、早く！」
あ「面倒くせえなあ……」

```js
return items.lastIndexOf('ウォーリー');
// 6
```

イ「配列魔法を使うとどこに隠れてても一発で見つかるね！」
あ「今回は手抜き感が半端ないな」

### 解説

> `slice()` メソッドは `begin` から `end` まで選択された配列の一部をシャローコピーして、新しい配列オブジェクトを返します (`end` は含まれません)。元の配列は変更されません。

（[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)より）

配列内を最後から検索し、指定した値が最初に現れる場所（インデックス）を返します。配列内に指定した値と同じものが1つしかない場合は、結果は`indexOf()` と同じになります。

----
さて、魔法JS☆あれいは、魔法（JavaScript）の力でこの世界を守ることが出来るのか！？　次回に続く！
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIwNjAxMzgwOTEsLTExNDQ5OTE2MjMsLT
EyNDY5MTYyOTIsLTE4Mzk3ODI1OTEsLTc1MTkwNDA3Nl19
-->